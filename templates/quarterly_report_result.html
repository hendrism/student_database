{% extends "base.html" %}
{% block title %}Quarterly Report Result{% endblock %}
{% block content %}
<h2>Generated Quarterly Report</h2>
<form method="POST" action="{{ url_for('routes.save_quarterly_report') }}">
  <input type="hidden" name="student_id" value="{{ student_id }}">
  <input type="hidden" name="quarter" value="{{ quarter }}">
  {% for paragraph in report_paragraphs %}
    <div class="goal-report mb-3">
      <textarea id="reportTextarea{{ loop.index }}" name="paragraphs" class="form-control mb-2" rows="5">{{ paragraph }}</textarea>
      <button class="btn btn-secondary btn-sm" type="button" onclick="copyParagraph({{ loop.index }})">Copy Goal {{ loop.index }}</button>
    </div>
  {% endfor %}
  <button type="submit" class="btn btn-primary mt-3">Save Report</button>
</form>
<a href="{{ url_for('routes.quarterly_report') }}" class="btn btn-outline-primary mt-3">Generate Another Report</a>

<script>
  function copyParagraph(index) {
    var text = document.getElementById("reportTextarea" + index).value;
    navigator.clipboard.writeText(text).then(function() {
      alert("Goal " + index + " copied to clipboard!");
    }, function(err) {
      alert("Failed to copy: " + err);
    });
  }
</script>
{% endblock %}
